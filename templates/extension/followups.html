{% extends 'base.html' %}
{% block title %}Follow-ups{% endblock %}
{% block main_class %}container narrow{% endblock %}

{% block content %}
<section class="card">
    <h1>Follow-ups</h1>
    <p>Track scheduled and open follow-ups. Sorts by priority and due date.</p>
</section>

<section class="card">
    <div class="stacked">
        {% for item in followups %}
        <div class="pill">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <strong>{{ item.farmer }}</strong>
                <span class="tag">{{ item.get_priority_display }} / {{ item.get_status_display }}</span>
            </div>
            <p>{{ item.topic }}</p>
            {% if item.due_date %}<small>Due: {{ item.due_date }}</small><br>{% endif %}
            <small>{{ item.note|default:"No note" }}</small>
        </div>
        {% empty %}
        <p>No follow-ups logged.</p>
        {% endfor %}
    </div>
</section>

{% if is_paginated %}
<div class="pagination">
    {% if page_obj.has_previous %}<a href="?page={{ page_obj.previous_page_number }}">Previous</a>{% endif %}
    <span>Page {{ page_obj.number }} of {{ paginator.num_pages }}</span>
    {% if page_obj.has_next %}<a href="?page={{ page_obj.next_page_number }}">Next</a>{% endif %}
</div>
{% endif %}
{% endblock %}

